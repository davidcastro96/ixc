{{!-- Contenido que estará disponible en el {{{body}}} del main --}}
<h2>Listado de todos los contactos</h2>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  function deleteContact(id) {
    fetch(`/${id}`).then(function (response) {
      if (response.ok) {
        Swal.fire({
          position: 'top-end',
          icon: 'success',
          title: 'contacto eliminado',
          showConfirmButton: false,
          timer: 1500
        })
        window.location.reload();
      } else {
        console.log('Error eliminando contacto');
      }
    })
      .catch(function (error) {
        console.log('Hubo un problema con la petición Fetch:' + error.message);
      });
  }
  //----------------------------------------------
  function editarContact(id) {
    fetch(`/${id}`,{method: 'DELETE'}).then(function (response) {
      if (response.ok) {
        console.log("ok 1")
        //window.location.reload();
      } else {
        console.log('Error actualizando contacto');
      }
    })
      .catch(function (error) {
        console.log('Hubo un problema con la petición Fetch:' + error.message);
      });
  }
</script>
<div class="scroll">
  <table class="table table-dark">
    <thead style="position: sticky;
            top: -1;
            z-index: 10; background:#343a40">
      <tr>
        <th scope="col">#</th>
        <th scope="col">lookupName</th>
        <th scope="col">createdTime</th>
        <th scope="col">updatedTime</th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>
    {{#if contacts}}
    <tbody>
      {{#each contacts.items}}
      <tr>
        <th scope="row">{{this.id}}</th>
        <td>{{this.lookupName}}</td>
        <td>{{this.createdTime}}</td>
        <td>{{this.updatedTime}}</td>
        <td><button class="btn btn-info" type="button" onclick="editarContact({{this.id}})">editar</button></td>
        <td><button class="btn btn-danger" type="button" onclick="deleteContact({{this.id}})">eliminar</button></td>
      </tr>
      {{/each}}
    </tbody>
    {{/if}}
  </table>
</div>